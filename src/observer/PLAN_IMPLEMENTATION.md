Start: 2024. 12. 16

================================================== 초 단기 목표 ==================================================

기본적인 ros2 데이터 통신
센서 데이터를 통합센터에서 데이터 수신: 현재 jetson NX and AGX 모델 두개가 있는데, 각각에서 센서를 작동해서 host pc에서 두곳에서 모두 토픽 및 메세지를 받을수 있는지 확인(혹은 jetson nx에서 발신 jetson agx 에서는 발신과 동시에 두 메세지 모두 agx에서 수신해서 host pc역할을 agx가 하는 것도 염두...)
이미지랑 라이다를 볼수있는 대쉬보드?  host pc 혹은 agx에서 브라우져로 띄우기
초단기에는 신호 확인을 위해 rviz2 사용도 가능
ROS2 멀티머신 설정: Jetson NX, AGX, Host PC 간 ROS2 네트워크 설정 (환경변수, DDS, QoS 설정)

   - ROS_DOMAIN_ID 설정
   - DDS 설정 (FastDDS 권장)
	
   - Jetson NX -> AGX 단방향 통신
   - NX <-> AGX 양방향 통신
   - Host PC에서 수신 테스트

   - RViZ2로 LiDAR, 카메라 토픽 간단 시각화
   - 기본 카메라 스트리밍 (압축 이미지 전송 옵션 테스트)
   - LIDAR 데이터 전송 및 기본 시각화
   - 시스템 상태 정보 전송 (Jetson NX, AGX의 시스템 상태 정보를 토픽으로 퍼블리싱)


Start: 2024. 12. 23

================================================== 단기 목표(0 Phase) ==================================================


일단 전체적인 구조만 먼저 구성하시오 (각 영역은 클릭 가능하지만 동작하지 않음 (Place Holder))

예시)
* 각 부분은 필요에 따라 변경가능

	파일	보기	설정	도움말 ...	
	==========================================================================
	| 카메라 0 | 이미지 1 | 지도 | 장애물 경고(실시간거리)  |
	--------------------------------------------------------------------------
	| 이미지 2 | 이미지 3 | 매핑 | 서비스 맞춤 분석 창    |
	==========================================================================
	| 설정 | 이동제어 | 센서 설정 |
	| 데이터 기록/재생 | 클라우드 접속(외부링크) |
	==========================================================================
	| 젯슨 상태 패널 | 젯슨001 - 배터리, 네트워크 상태, 시스템 온도, 센서 상태, cpu, gpu상태, 현재위치 etc...
	|           | 젯슨002 - 배터리, 네트워크 상태, 시스템 온도, 센서 상태, cpu, gpu상태, 현재위치 etc...
	==========================================================================
	| 히스토리 패널 | 
	==========================================================================
	
카메라 0 : 빈 칸, 미구현 (blank)
카메라 1 : 빈 칸, 미구현 (blank)
카메라 2 : 빈 칸, 미구현 (blank)
카메라 3 : 빈 칸, 미구현 (blank)

지도 : 빈 칸, 미구현 (blank)
장애물 경고 : 빈 칸, 미구현 (blank)
매핑 : 빈 칸, 미구현 (blank)
서비스 맞춤 분석 창 : 빈 칸, 미구현 (blank)

설정 : click able, but function 미구현(클릭 가능한 UI 요소는 Place Holder로 두고, 실제 기능은 나중에 구현)
이동제어 : click able, but function 미구현
센서 설정 : click able, but function 미구현
데이터 기록/재생 : click able, but function 미구현
클라우드 접속(외부링크) : click able, but function 미구현

젯슨 상태 패널 : 빈 칸, 미구현 (blank)

히스토리 패널
빈 칸, 미구현 (blank)

Start: 2024. 12. 31

================================================== 단기 목표(1 Phase) ==================================================

fastapi 혹은 flask에 기반해서 혹은 qt(필요시 장기 목표)를 이용해서 대쉬보드 구성을 비교하고 제일 나은 방법으로 구성, 
FastAPI/Flask: 웹기반 -> 원격 모니터링 가능, 복수의 클라이언트 동시 접근 가능. 단, WebSocket 등을 통한 실시간 스트리밍 로직 필요.
Qt: 로컬 GUI 개발이 쉬울 수도 있지만, 원격 접근 불편, 배포성 낮음.
초기에는 FastAPI+WebSocket을 통해 이미지/PointCloud를 MJPEG나 WebSocket으로 송출하는 방법 검토. 이후 필요 시 Flask+React, FastAPI+Vue 등 프론트엔드 통합 검토 가능.
센서별 FPS, 프레임 드롭율 
라이다 데이터 2D(2D 그래프: Matplotlib 또는 Plotly)/3D(3D 포인트 클라우드: Plotly 또는 Open3D) 그래프 시각화.

+ FPS 계산 및 프레임 드롭율 분석

예시)
* 각 부분은 필요에 따라 변경가능

	파일	보기	설정	도움말 ...	
	==========================================================================
	| 카메라 0 | 이미지 1 | 지도 | 장애물 경고(실시간거리)  |
	--------------------------------------------------------------------------
	| 이미지 2 | 이미지 3 | 매핑 | 서비스 맞춤 분석 창    |
	==========================================================================
	| 설정 | 이동제어 | 센서 설정 |
	| 데이터 기록/재생 | 클라우드 접속(외부링크) |
	==========================================================================
	| 젯슨 상태 패널 | 젯슨001 - 배터리, 네트워크 상태, 시스템 온도, 센서 상태, cpu, gpu상태, 현재위치 etc...
	|           | 젯슨002 - 배터리, 네트워크 상태, 시스템 온도, 센서 상태, cpu, gpu상태, 현재위치 etc...
	==========================================================================
	| 히스토리 패널 | 
	==========================================================================
	
카메라 0 : 카메라 원본(jetson nx, csi camera image 0)
카메라 1 : 카메라 원본(jetson nx, csi camera image 1)
카메라 2 : 카메라 원본(jetson agx, usb camera image 0)
카메라 3 : 카메라 원본(saved video)

지도 : 미구현 (blank)
장애물 경고 : 미구현 (blank)
매핑 : lidar를 이용한 scan data 보여줌
서비스 맞춤 분석 창 : 미구현 (blank)

설정 : click able, but function 미구현
이동제어 : click able, but function 미구현
센서 설정 : click able, but function 미구현
데이터 기록/재생 : click able, but function 미구현
클라우드 접속(외부링크) : click able, but function 미구현

젯슨 상태 패널 : 미구현

히스토리 패널

현재상태: ros2에서 브릿지 노드에서 발행, zmq 브릿지를 이용해, ros2와 fastapi사이에 통신을 합니다. (ROS2 브리지(odin_bridge) → ZeroMQ → FastAPI/WebSocket → 브라우저)
이때 websocket을 이용하며 결과적으로 브라우져에 현재 이미지0, 라이다 정보 그리고 연결된 젯슨에 따른 동적 state panel을 보여줍니다.

목적: ROS2에서 수집된 카메라·LiDAR 등의 센서 데이터를 브라우저 대시보드에 실시간으로 표시한다.

Process.
1. ROS2 (bridge_node) 에서 센서 데이터를 ZeroMQ로 퍼블리시(PUB).
2. observer/bridge (zmq_bridge) 에서 SUB로 수신 후, WebSocket을 통해 FastAPI 서버로 전달.
3. 브라우저는 FastAPI 서버에 접속(WebSocket), 카메라 영상·LiDAR 스캔을 실시간으로 수신·시각화.

(1) ROS2 토픽 → ZMQ로 전달
ROS2에서 카메라 토픽을 구독(sub)하는 노드를 만듭니다.
해당 노드가 ZMQ를 이용하여 다른 플랫폼(예: Python 서버, C++ 프로그램 등)으로 카메라 데이터를 발행(pub)합니다.
이렇게 하면 ROS2가 아닌 외부 프로그램도 ZMQ로부터 데이터를 받아볼 수 있습니다.
(2) ZMQ를 받은 외부 프로그램 → WebSocket → 브라우저
위에서 받은 카메라 데이터를 가공/인코딩 후, WebSocket 서버를 통해 브라우저로 전송합니다.
브라우저는 단순히 WebSocket을 열어서 실시간 영상을 수신하면 됩니다.

결과
실시간 카메라 스트리밍
LiDAR 데이터 시각화 (Plotly)
동적 Jetson 상태 패널
연결 상태 모니터링
이벤트 로깅

JPEG 압축을 통한 이미지 전송 최적화
WebSocket FPS 제한 (카메라: 10fps, LiDAR: 5fps)
메시지 캐싱 및 브로드캐스트 최적화
JSON 직렬화 최소화


향후 개선방안

1. 여러 카메라 (이미지 1,2,3) & AI 처리
 - 사물 인식(“카메라1”), 이미지 세그멘테이션(“카메라2”) 등 추가 WS 채널.

2. 다중 로봇(Multi Jetson)
 - /jetson_001/lidar, /jetson_002/lidar 등을 통합 매핑.
 - 대시보드에서 “젯슨001 상태”, “젯슨002 상태” 동적 표시.

3. 사설/공인망(VPN/WAN)
 - 5G 또는 WAN 환경에서 ROS2 discovery가 막힐 경우, manual discovery or ZeroMQ bridging 확장.

4. 클라우드 연동
 - 센서 데이터를 클라우드에 저장 및 시각화(장기 목표).

================================================== 단기 목표(2 Phase) ==================================================

예시)
* 각 부분은 필요에 따라 변경가능

	파일	보기	설정	도움말 ...	
	==========================================================================
	| 카메라 0 | 이미지 1 | 지도 | 장애물 경고(실시간거리)  |
	--------------------------------------------------------------------------
	| 이미지 2 | 이미지 3 | 매핑 | 서비스 맞춤 분석 창    |
	==========================================================================
	| 설정 | 이동제어 | 센서 설정 |
	| 데이터 기록/재생 | 클라우드 접속(외부링크) |
	==========================================================================
	| 젯슨 상태 패널 | 젯슨001 - 배터리, 네트워크 상태, 시스템 온도, 센서 상태, cpu, gpu상태, 현재위치 etc...
	|           | 젯슨002 - 배터리, 네트워크 상태, 시스템 온도, 센서 상태, cpu, gpu상태, 현재위치 etc...
	==========================================================================
	| 히스토리 패널 | 
	==========================================================================
	
카메라 0 : 카메라 원본(jetson nx, csi camera image 0)
카메라 1 : 카메라(사물인식)(jetson nx, csi camera image 1)
카메라 2 : 카메라 (이미지 세크멘트)(jetson agx, usb camera image 0)
카메라 3 : 카메라 (3d mesh grid point cloud)(saved video)

지도 : Google 지도기반 현재 위치 link and coordinate, 실시간 동기화
장애물 경고 : 미구현 (blank)
매핑 : lidar를 이용한 scan data 보여줌
서비스 맞춤 분석 창 : 미구현 (blank)

설정 : click able, but function 미구현
이동제어 : click able, but function 미구현
센서 설정 : click able, but function 미구현
데이터 기록/재생 : click able, but function 미구현
클라우드 접속(외부링크) : click able, but function 미구현

젯슨 상태 패널 : 젯슨001: 배터리 정보, 네트워크 연결 상태, 시스템 온도, 센서 상태, cpu, gpu, 현재 위치 정보

히스토리 패널



================================================== 중장기 목표 ==================================================

예시)
* 각 부분은 필요에 따라 변경가능

	파일	보기	설정	도움말 ...	
	==========================================================================
	| 카메라 0 | 이미지 1 | 지도 | 장애물 경고(실시간거리)  |
	--------------------------------------------------------------------------
	| 이미지 2 | 이미지 3 | 매핑 | 서비스 맞춤 분석 창    |
	==========================================================================
	| 설정 | 이동제어 | 센서 설정 |
	| 데이터 기록/재생 | 클라우드 접속(외부링크) |
	==========================================================================
	| 젯슨 상태 패널 | 젯슨001 - 배터리, 네트워크 상태, 시스템 온도, 센서 상태, cpu, gpu상태, 현재위치 etc...
	|           | 젯슨002 - 배터리, 네트워크 상태, 시스템 온도, 센서 상태, cpu, gpu상태, 현재위치 etc...
	==========================================================================
	| 히스토리 패널 | 
	==========================================================================
	
카메라 0 : 카메라 원본(jetson nx, csi camera image 0)
카메라 1 : 카메라(사물인식)(jetson nx, csi camera image 1)
카메라 2 : 카메라 (이미지 세크멘트)(jetson agx, usb camera image 0)
카메라 3 : 카메라 (3d mesh grid point cloud)(saved video)

지도 : Google 지도기반 현재 위치 link and coordinate, 실시간 동기화
장애물 경고 :  실시간 주변 장애물 인지 및 거리 파악, 카메라와 연계한 시각적 강조
매핑 : 통합라이다 뷰(매핑):다중 로봇의 lidar를 이용한 다중 매핑
서비스 맞춤 분석 창 : 카메라 라이다 지도 모든 데이터 동기화? 3D?

설정 : click able, but function 미구현
이동제어 : click able, but function 미구현
센서 설정 : click able, but function 미구현
데이터 기록/재생 : click able, but function 미구현
클라우드 접속(외부링크) : click able, but function 미구현

젯슨 상태 패널 : 젯슨001: 배터리 정보, 네트워크 연결 상태, 시스템 온도, 센서 상태, cpu, gpu, 현재 위치 정보

히스토리 패널


================================================== 장기 목표 ==================================================

클라우드 연동.
	- 데이터를 클라우드에 업로드 및 저장.
	- 클라우드 데이터와 대쉬보드 연동